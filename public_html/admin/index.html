<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Back office</title>
    <link rel="stylesheet" href="styles/admin.css" type="text/css"/>
</head>
<body>
<header>
    <!-- ko if: active_page() === 0 -->
    <h1>Back office</h1>
    <!-- /ko -->
    <!-- ko if: active_page() === 1 -->
    <h1>Create new User</h1>
    <!-- /ko -->
    <!-- ko if: active_page() === 2 || active_page() === 3 -->
    <h1 data-bind="text: current_user().user_name"> </h1>
    <!-- /ko -->
</header>
<div class="head_table">
    <div class="table-row">
        <div class="wrapper_left">
            <div class="inner-wrapper">
                <button data-bind="click: function() { active_page(1); }" class="new-user" type="button">Create new User</button>
                <div data-bind="search: search_users"> </div>
                <!-- ko if: search_active() -->
                <ul data-bind="foreach: search_users">
                    <li data-bind="text: user_name, attr: { active: $parent.current_user().id == id }, click: function() { $parent.current_user($data); $parent.active_page(2); }"></li>
                </ul>
                <a href="#" data-bind="click: search_disable">повернутись назад</a>
                <!-- /ko -->
                <!-- ko if: !search_active() -->
                <ul data-bind="foreach: users">
                    <li data-bind="text: user_name, attr: { active: $parent.current_user().id == id }, click: function() { $parent.current_user($data); $parent.active_page(2); }"></li>
                </ul>
                <div class="upload-users">
                    <a href="#" data-bind="upload_users: users">upload users</a>
                </div>
                <!-- /ko -->
            </div>
        </div>
        <div id="main" class="main">
            <!-- ko if: active_page() === 0 -->
                початкова сторінка
            <!-- /ko -->
            <!-- ko if: active_page() === 1 -->
            <!-- ko with: create_user() -->
            <form name="form" action="" class="new-user">
                <table>
                    <tr>
                        <td>Name:</td>
                        <td>
                            <input name="name" data-bind="value: user_name.text, attr: { invalid: user_name.invalid }" type="text" />
                        </td>
                    </tr>
                    <tr>
                        <td>Description:</td>
                        <td>
                            <textarea data-bind="value: descr.text, attr: { invalid: descr.invalid }" name="description"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td>City:</td>
                        <td>
                            <input data-bind="value: city.text, attr: { invalid: city.invalid }" name="city" type="text" />
                        </td>
                    </tr>
                </table>
                <div class="buttons">
                    <button data-bind="click: send" type="submit">Submit</button>
                    <button  type="reset">reset</button>
                </div>
                <span data-bind="text: curr_operation()"></span>
            </form>
            <!-- /ko -->
            <!-- /ko -->
            <!-- ko if: active_page() === 2 -->
            <!-- ko with: current_user() -->
            <div class="info">
                <div class="table info-table">
                    <div class="table-row">
                        <div class="table-cell binfo">
                            <table class="table-info">
                                <tr>
                                    <td>Name:</td>
                                    <td data-bind="text: user_name"></td>
                                </tr>
                                <tr>
                                    <td>City:</td>
                                    <td data-bind="text: city"></td>
                                </tr>
                                <tr>
                                    <td>Description:</td>
                                    <td data-bind="text: descr"></td>
                                </tr>
                            </table>
                        </div>
                        <div class="table-cell bphoto">
                            <div class="img">
                                <img data-bind="attr: { src: photo }" >
                            </div>
                            <span data-bind="click: $parent.edit" class="edit">Edit</span>
                        </div>

                    </div>
                </div>
            </div>
            <!-- /ko -->
            <!-- /ko -->
            <!-- ko if: active_page() === 3 -->
            <!-- ko with: update_user() -->
            <div class="edit">
                <form name="formname" action="">
                    <table>
                        <tr>
                            <td>name:</td>
                            <td>
                                <input type="text" name="edit_name" data-bind="value: user_name.text, attr: { invalid: user_name.invalid }"/>
                            </td>
                        </tr>
                        <tr>
                            <td>city:</td>
                            <td>
                                <input type="text" name="edit_name" data-bind="value: city.text, attr: { invalid: user_name.invalid }"/>
                            </td>
                        </tr>
                        <tr>
                            <td>description:</td>
                            <td>
                                <textarea data-bind="value: descr.text, attr: { invalid: user_name.invalid }"> </textarea>
                            </td>
                        </tr>
                    </table>
                    <div class="buttons">
                        <button type="button" data-bind="click: update_info">submit</button>
                        <button type="reset">reset</button>
                    </div>
                </form>
                <form id="formPhoto">
                    <table>
                        <tr>
                            <td>photo:</td>
                            <td>
                                <input data-bind="value: id" name="id"  type="hidden" value="" />
                                <input name="photo" type="file" />
                            </td>
                        </tr>
                    </table>
                    <progress id="photoProgress"></progress>
                    <div class="buttons">
                        <button type="button" data-bind="click: update_image">submit</button>
                        <button type="reset">reset</button>
                    </div>
                </form>
                <form id="formData">
                    <table>
                        <tr>
                            <td>add data:</td>
                            <td>
                                <input data-bind="value: id" name="id" type="hidden" value="" />
                                <label><input type="checkbox" value="true" checked="checked" />ignore</label>
                                <input name="data" type="file" />
                            </td>
                        </tr>
                    </table>
                    <progress id="dataProgress"></progress>
                    <div class="buttons">
                        <button type="button" data-bind="click: update_data">submit</button>
                        <button type="reset">reset</button>
                    </div>
                </form>
                <span data-bind="text: curr_operation()"></span>
            </div>
            <!-- /ko -->
            <!-- /ko -->
        </div>
    </div>
</div>
<script type='text/javascript' src='../site/js/vendor/jquery-2.1.1.js'></script>
<script type='text/javascript' src='../site/js/vendor/knockout/knockout-3.2.0.js'></script>
<script type='text/javascript' src='js/app/validator.js'></script>
<script type='text/javascript' src='js/app/ajax.js'></script>
<script type='text/javascript' src='js/app/admin.vm.js'></script>
</body>
</html>